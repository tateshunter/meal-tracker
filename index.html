<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Meal Diary</title>
  <style>
    body { font-family: sans-serif; background: #f5f5f5; padding: 2rem; }
    h1 { color: #2a5d84; text-align: center; }
    .form-group { margin-bottom: 1rem; }
    input, textarea, button { width: 100%; padding: 0.5rem; font-size: 1rem; margin-top: 0.25rem; }
    textarea { resize: vertical; }
    .meal-log { margin-top: 2rem; }
    .meal-entry { background: white; padding: 1rem; margin-bottom: 1rem; border-radius: 5px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
    .meal-entry h3 { margin: 0 0 0.5rem 0; color: #406e34; }
    .meal-entry small { color: #666; }
    .meal-entry textarea { margin-top: 0.5rem; }
    .search-bar { margin: 1rem 0; }
  </style>
</head>
<body>
  <h1>üç≤ Meal Diary</h1>
  <div class="form-group">
    <label for="mealDate">Date</label>
    <input type="date" id="mealDate">
  </div>
  <div class="form-group">
    <label for="mealDesc">Meal Description</label>
    <textarea id="mealDesc" rows="3" placeholder="What did you eat?"></textarea>
  </div>
  <button onclick="addMeal()">Add Meal</button>

  <div class="search-bar">
    <label for="searchDate">Search by Date</label>
    <input type="date" id="searchDate" onchange="renderMeals()">
  </div>

  <div class="meal-log" id="mealLog"></div>

  <script>
    const mealLog = document.getElementById('mealLog');
    const mealDate = document.getElementById('mealDate');
    const mealDesc = document.getElementById('mealDesc');
    const searchDate = document.getElementById('searchDate');

    let meals = JSON.parse(localStorage.getItem('meals') || '[]');

    document.addEventListener('DOMContentLoaded', () => {
      const today = new Date().toISOString().split('T')[0];
      mealDate.value = today;
      renderMeals();
    });

    function addMeal() {
      const date = mealDate.value;
      const desc = mealDesc.value.trim();
      if (!desc) return alert('Please enter a description.');
      meals.push({ date, desc, notes: '' });
      localStorage.setItem('meals', JSON.stringify(meals));
      mealDesc.value = '';
      renderMeals();
    }

    function saveNotes(index, textarea) {
      meals[index].notes = textarea.value;
      localStorage.setItem('meals', JSON.stringify(meals));
    }

    function renderMeals() {
      const filterDate = searchDate.value;
      mealLog.innerHTML = '';
      const filtered = filterDate ? meals.filter(m => m.date === filterDate) : meals;
      filtered.slice().reverse().forEach((meal, index) => {
        const div = document.createElement('div');
        div.className = 'meal-entry';
        div.innerHTML = `
          <h3>${meal.date}</h3>
          <p>${meal.desc}</p>
          <small>Notes:</small>
          <textarea rows="2" onchange="saveNotes(${meals.indexOf(meal)}, this)">${meal.notes || ''}</textarea>
        `;
        mealLog.appendChild(div);
      });
    }
  </script>
</body>
</html>
